(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{100:function(e,t,n){},102:function(e,t,n){},104:function(e,t,n){},106:function(e,t,n){},237:function(e,t,n){},239:function(e,t,n){},248:function(e,t,n){"use strict";n.r(t);var a=n(11),r=n.n(a),o=n(73),i=n.n(o),c=(n(100),n(21));n(102),n(104);var u=function(e){var t=e.theme,n=e.setTheme,o=function(e){n(e),localStorage.setItem("theme",e),document.documentElement.setAttribute("saved-theme",e)};return Object(a.useEffect)(function(){var e=function(e){e.storageArea===localStorage&&"theme"===e.key&&null!==e.newValue&&o(e.newValue)};return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}},[]),r.a.createElement("div",{className:"darkmode"},r.a.createElement("input",{className:"toggle",id:"darkmode-toggle",type:"checkbox",tabIndex:-1,onChange:function(){o("dark"===t?"light":"dark")},checked:"dark"===t}),r.a.createElement("label",{id:"toggle-label-light",htmlFor:"darkmode-toggle",tabIndex:-1},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",id:"dayIcon",x:"0px",y:"0px",viewBox:"0 0 35 35"},r.a.createElement("title",null,"Light Mode"),r.a.createElement("path",{d:"M6,17.5C6,16.672,5.328,16,4.5,16h-3C0.672,16,0,16.672,0,17.5    S0.672,19,1.5,19h3C5.328,19,6,18.328,6,17.5z M7.5,26c-0.414,0-0.789,0.168-1.061,0.439l-2,2C4.168,28.711,4,29.086,4,29.5    C4,30.328,4.671,31,5.5,31c0.414,0,0.789-0.168,1.06-0.44l2-2C8.832,28.289,9,27.914,9,27.5C9,26.672,8.329,26,7.5,26z M17.5,6    C18.329,6,19,5.328,19,4.5v-3C19,0.672,18.329,0,17.5,0S16,0.672,16,1.5v3C16,5.328,16.671,6,17.5,6z M27.5,9    c0.414,0,0.789-0.168,1.06-0.439l2-2C30.832,6.289,31,5.914,31,5.5C31,4.672,30.329,4,29.5,4c-0.414,0-0.789,0.168-1.061,0.44    l-2,2C26.168,6.711,26,7.086,26,7.5C26,8.328,26.671,9,27.5,9z M6.439,8.561C6.711,8.832,7.086,9,7.5,9C8.328,9,9,8.328,9,7.5    c0-0.414-0.168-0.789-0.439-1.061l-2-2C6.289,4.168,5.914,4,5.5,4C4.672,4,4,4.672,4,5.5c0,0.414,0.168,0.789,0.439,1.06    L6.439,8.561z M33.5,16h-3c-0.828,0-1.5,0.672-1.5,1.5s0.672,1.5,1.5,1.5h3c0.828,0,1.5-0.672,1.5-1.5S34.328,16,33.5,16z     M28.561,26.439C28.289,26.168,27.914,26,27.5,26c-0.828,0-1.5,0.672-1.5,1.5c0,0.414,0.168,0.789,0.439,1.06l2,2    C28.711,30.832,29.086,31,29.5,31c0.828,0,1.5-0.672,1.5-1.5c0-0.414-0.168-0.789-0.439-1.061L28.561,26.439z M17.5,29    c-0.829,0-1.5,0.672-1.5,1.5v3c0,0.828,0.671,1.5,1.5,1.5s1.5-0.672,1.5-1.5v-3C19,29.672,18.329,29,17.5,29z M17.5,7    C11.71,7,7,11.71,7,17.5S11.71,28,17.5,28S28,23.29,28,17.5S23.29,7,17.5,7z M17.5,25c-4.136,0-7.5-3.364-7.5-7.5    c0-4.136,3.364-7.5,7.5-7.5c4.136,0,7.5,3.364,7.5,7.5C25,21.636,21.636,25,17.5,25z"}))),r.a.createElement("label",{id:"toggle-label-dark",htmlFor:"darkmode-toggle",tabIndex:-1},r.a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",version:"1.1",id:"nightIcon",x:"0px",y:"0px",viewBox:"0 0 100 100"},r.a.createElement("title",null,"Dark Mode"),r.a.createElement("path",{d:"M96.76,66.458c-0.853-0.852-2.15-1.064-3.23-0.534c-6.063,2.991-12.858,4.571-19.655,4.571  C62.022,70.495,50.88,65.88,42.5,57.5C29.043,44.043,25.658,23.536,34.076,6.47c0.532-1.08,0.318-2.379-0.534-3.23  c-0.851-0.852-2.15-1.064-3.23-0.534c-4.918,2.427-9.375,5.619-13.246,9.491c-9.447,9.447-14.65,22.008-14.65,35.369  c0,13.36,5.203,25.921,14.65,35.368s22.008,14.65,35.368,14.65c13.361,0,25.921-5.203,35.369-14.65  c3.872-3.871,7.064-8.328,9.491-13.246C97.826,68.608,97.611,67.309,96.76,66.458z"}))))},s=n(65),d=n(84),l=JSON.stringify({type:"doc",content:[]});n(106);var m=n(74),f=n(85),h=n(75),g=n(76),v=n(77),p=n(12),w=n(3),b=n(24),k=n(78),y="#ff333355",M="#ffa33355",E="#fff00055",S="#99999933",C=864e5;function T(e){var t=e.getTime()-(new Date).getTime();return t<0?y:t<=C?M:t<=3*C?E:S}function O(e){var t=b.parse(e||"");return t.length>0&&{time:t[0].start.date().getTime()}}function x(e){return O(e.input)}var L=w.c.create({name:"timedTask",addAttributes:function(){return{time:{default:null,parseHTML:function(e){return e.getAttribute("data-time")||(new Date).getTime()},renderHTML:function(e){return{"data-time":e.time,"locale-string":new Date(e.time).toLocaleString("en-US",{month:"short",day:"numeric",hour:"numeric",minute:"numeric"})}}},uid:{default:null,renderHTML:function(e){return{id:e.uid}}},color:{default:S,renderHTML:function(e){return{style:"background: ".concat(e.color)}}}}},onCreate:function(){var e=this,t=this.editor.state.tr;this.editor.state.doc.descendants(function(n,a){if("text"===n.type.name){var r=n.marks.find(function(t){return t.type.name===e.name});if(void 0!==r){var o=a,i=a+n.nodeSize;t.removeMark(o,i,r);var c=e.type.create({color:T(new Date(r.attrs.time)),time:r.attrs.time,uid:Object(k.a)()});t.addMark(o,i,c)}}}),t.setMeta("addToHistory",!1),t.setMeta("preventUpdate",!0),this.editor.view.dispatch(t)},onUpdate:function(){var e=this,t=this.editor.state.tr;this.editor.state.doc.descendants(function(n,a){if("text"===n.type.name){var r=n.marks.find(function(t){return t.type.name===e.name});if(void 0!==r){var o=a,i=a+n.nodeSize,c=O(n.text);if(c){var u=e.type.create(Object(p.a)({},c,{uid:r.attrs.uid,color:T(new Date(c.time))}));t.removeMark(o,i,r),t.addMark(o,i,u)}}}}),t.setMeta("addToHistory",!1),t.setMeta("preventUpdate",!0),this.editor.view.dispatch(t)},parseHTML:function(){return[{tag:"span[data-time]"}]},addInputRules:function(){return[Object(w.o)({find:/(?:\s\()(due\s.+)(?:\))/,type:this.type,getAttributes:x})]},addPasteRules:function(){return[Object(w.p)({find:/(?:\s\()(due\s.+)(?:\))/g,type:this.type,getAttributes:x})]},renderHTML:function(e){return["span",e.HTMLAttributes,0]}}),j=function(e){var t=e.setTasks,n=function(e){var n=[];e.state.doc.descendants(function(e){if("text"===e.type.name){var t=e.marks.find(function(e){return"timedTask"===e.type.name});void 0!==t&&n.push({due:t.attrs.time,uid:t.attrs.uid})}}),t(function(e){return JSON.stringify(e)!==JSON.stringify(n)?n:e})},o=Object(s.b)({extensions:[d.a.configure({heading:{levels:[1,2,3]},codeBlock:{HTMLAttributes:{class:"highlight"}}}),m.a.configure({mode:"deepest"}),f.a.configure({protocols:["mailto"]}),h.a.configure({placeholder:"Welcome to your TabSpace!\n\nTreat this as your own little scratchspace in the comfort of your new tab page.\n\n- Markdown-like syntax is supported and notes are saved in real-time.\n- To create a new to-do task, write (due <deadline>) in a block.\n\nThis is your new digital home, set it up however you'd like!\n"}),g.a,v.a,L],content:JSON.parse(localStorage.getItem("blocks")||l),onCreate:function(e){var t=e.editor;return n(t)},onUpdate:function(e){var t,a=e.editor;n(a),t=a.getJSON(),localStorage.setItem("blocks",JSON.stringify(t))}});window.tabspace={dump:function(){return o?o.getJSON():null}},Object(a.useEffect)(function(){var e=function(e){e.storageArea===localStorage&&"blocks"===e.key&&null!==e.newValue&&o&&(o.commands.setContent(JSON.parse(e.newValue)),n(o))};return window.addEventListener("storage",e),function(){return window.removeEventListener("storage",e)}},[o]);return o?r.a.createElement(s.a,{onDrop:function(e){e.preventDefault(),e.stopPropagation();var t=e.dataTransfer.files;if(t.length>=1){var n=t[0],a=new FileReader;a.addEventListener("load",function(e){if(e.target&&o){var t=""+e.target.result;o.chain().focus().setImage({src:t}).run()}}),a.readAsDataURL(n)}},editor:o}):null},I=n(262),z=n(260),N=n(83),D=n(79);n(237);var A=function(e){var t=function(){var e=(new Date).getHours();return e<12?"Good morning":e<18?"Good afternoon":"Good evening"}(),n=function(){return(new Date).toLocaleTimeString(void 0,{hour:"numeric",minute:"numeric"})},o=Object(a.useState)(n()),i=Object(c.a)(o,2),u=i[0],s=i[1];return Object(a.useEffect)(function(){var e=setInterval(function(){return s(n())},1e3);return function(){return clearInterval(e)}},[]),r.a.createElement("div",{className:"overlay"},r.a.createElement("h1",null,u),r.a.createElement("p",null,t,". ",function(e,t){if(0===e)return"You have nothing due.";var n=1===e?"task":"tasks";return"You have ".concat(e," ").concat(n," due, ").concat(t," of which need to be done soon.")}(e.numTasks,e.numUrgentTasks)))};n(239);function H(e){return Math.max(0,e-(new Date).getTime())/C}function J(e){return H(e.due)<3}var U=Object(D.withSize)()(function(e){var t=Object(a.useRef)(),n=e.tasks.map(function(e){return{id:e.uid,val:(t=e.due,29*Math.pow(1.5,-H(t))+1)};var t});Object(a.useEffect)(function(){var e=t.current;e&&(e.d3Force("charge",Object(I.a)().strength(15)),e.d3Force("collide",Object(z.a)().radius(function(e){return 4*Math.sqrt(e.val)})),e.d3ReheatSimulation())},[t.current]);var o=Object(a.useCallback)(function(t,n){var a="dark"===e.theme;n.fillStyle=a?"#444444":"#cacaca",n.beginPath(),n.arc(t.x,t.y,4*Math.sqrt(t.val),0,2*Math.PI,!1),n.fill()},[e.theme]);return r.a.createElement("div",{className:"visualization"},r.a.createElement(A,{numTasks:e.tasks.length,numUrgentTasks:e.tasks.filter(J).length}),r.a.createElement(N.a,{ref:t,height:450,width:e.size.width,nodeLabel:"",onNodeClick:function(e){var t=document.getElementById((e.id||"").toString());t&&(t.classList.add("highlight"),t.scrollIntoView(),setTimeout(function(){return t.classList.remove("highlight")},800))},enablePanInteraction:!1,enableZoomInteraction:!1,nodeCanvasObject:o,graphData:{nodes:n,links:[]}}))});var R=function(){var e=Object(a.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(a.useState)(function(){var e=window.matchMedia("(prefers-color-scheme: light)").matches?"light":"dark",t=localStorage.getItem("theme")||e;return document.documentElement.setAttribute("saved-theme",t),t}()),s=Object(c.a)(i,2),d=s[0],l=s[1];return r.a.createElement("div",{className:"App"},r.a.createElement(u,{theme:d,setTheme:l}),r.a.createElement(U,{tasks:n,theme:d}),r.a.createElement(j,{setTasks:o}))};i.a.createRoot(document.getElementById("root")).render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(R,null)))},93:function(e,t,n){e.exports=n(248)}},[[93,2,1]]]);
//# sourceMappingURL=main.b1d69d27.chunk.js.map